{% extends 'base.html' %}
{% load static %}

{% block title %}
  <i class="fa-solid fa-user"></i>
  Account
{% endblock %}

{% block subtitle %}
  Hi {{ user_data.display_name }} (aka <a href="{{ user_data.external_urls.spotify }}">{{ user_data.id }}</a>), check out your account!
{% endblock %}

{% block content %}
  {% load static %}

  <nav class="level">
    <div class="level-item has-text-centered">
      <div>
        <p class="heading">Playlists</p>
        <p class="title">{{ playlists|length }}</p>
      </div>
    </div>

    <div class="level-item has-text-centered">
      <div>
        <p class="heading">Followers</p>
        <p class="title">{{ user_data.followers.total }}</p>
      </div>
    </div>
    <div class="level-item has-text-centered">
      <button class="button is-primary" onclick="logout()">Logout</button>
    </div>
  </nav>

  <div class="grid is-col-min-15">
    {% for playlist in playlists %}
      <div class="cell card">
        <div class="card-content">
          <div class="media">
            {% if playlist.images %}
              <div class="media-left">
                <figure class="image is-48x48">
                  <img src="{{ playlist.images.0.url }}" alt="{{ playlist.name }}" />
                </figure>
              </div>
            {% endif %}
            <div class="media-content">
              <p class="title is-4">
                <a href="{{ playlist.external_urls.spotify }}">{{ playlist.name }}</a>
              </p>
              <p class="subtitle is-6">
                {{ playlist.tracks.total }} tracks -{% if playlist.public %}
                  Public
                {% else %}
                  Private
                {% endif %}
              </p>
            </div>
          </div>
          <div class="content">{{ playlist.description }}</div>
          <br />
        </div>
      </div>
    {% endfor %}
  </div>
{% endblock %}
